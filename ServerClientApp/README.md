# Server–Client Communication — Java

A minimal multi-threaded TCP chat application demonstrating server–client communication in Java.

## Project structure

```
ServerClientApp/
├── build.sh                  # Compile script
├── src/
│   ├── common/
│   │   └── Message.java      # Serializable message exchanged between peers
│   ├── server/
│   │   ├── Server.java       # Multi-threaded TCP server
│   │   └── ClientHandler.java# Per-client handler (runs on its own thread)
│   ├── client/
│   │   └── Client.java       # TCP client with background listener thread
│   ├── ServerMain.java       # Server entry point
│   └── ClientMain.java       # Client entry point (interactive console)
└── out/                      # Compiled .class files (generated by build.sh)
```

## How it works

```
┌──────────┐   ObjectOutputStream/   ┌──────────────────────────┐
│  Client  │◄── ObjectInputStream ──►│  Server                  │
│          │                         │  ┌───────────────────┐   │
│ sends /  │      TCP socket         │  │  ClientHandler #1 │   │
│ receives │◄────────────────────────┤  │  ClientHandler #2 │   │
│ Message  │                         │  │  ...              │   │
│ objects  │                         │  └───────────────────┘   │
└──────────┘                         └──────────────────────────┘
```

* `Message` objects are serialized over a `Socket` using `ObjectOutputStream` /
  `ObjectInputStream`.
* The server spawns a new `ClientHandler` thread for every accepted connection.
* Any message received from one client is **broadcast** to all other connected
  clients.
* The client spawns a background **listener thread** so the main thread can keep
  reading from the console without blocking.

## Build

```bash
cd ServerClientApp
chmod +x build.sh
./build.sh
# → class files written to out/
```

## Run

### Start the server

```bash
# Default port 5000
java -cp out ServerMain

# Custom port
java -cp out ServerMain 9000
```

### Connect a client

Open a new terminal for each client:

```bash
# Defaults: localhost  port 5000  username "Client"
java -cp out ClientMain

# Custom host / port / username
java -cp out ClientMain localhost 9000 Alice
```

Type a message and press **Enter** to send it to all other clients.  
Type **`/quit`** (or press Ctrl-C) to disconnect.

## Key classes

| Class | Responsibility |
|---|---|
| `common.Message` | Serializable value object carrying sender, content, and timestamp |
| `server.Server` | Opens a `ServerSocket`, accepts connections, manages `ClientHandler` list |
| `server.ClientHandler` | One per client — reads incoming `Message` objects and broadcasts them |
| `client.Client` | Connects to the server, sends `Message` objects, fires `MessageListener` callbacks |
| `ServerMain` | CLI entry point for the server |
| `ClientMain` | CLI entry point for interactive console-based client |
